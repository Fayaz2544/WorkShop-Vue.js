{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      id: '',\n      products: [],\n      orders: [],\n      selectedProductId: '',\n      // ส่งข้อมูล\n      postdata: {\n        products_name: '',\n        price: '',\n        amount: '',\n        orderamount: ''\n      },\n      // ล้างข้อมูล\n      postdefault: {\n        products_name: '',\n        price: '',\n        amount: ''\n      }\n    };\n  },\n  methods: {\n    decrement(index) {\n      if (this.products[index].bpm > 0) {\n        this.products[index].bpm--;\n      }\n    },\n    increment(index) {\n      this.products[index].bpm++;\n    },\n    fetchProducts() {\n      axios.get('http://localhost:3000/products').then(response => {\n        this.products = response.data.data.map(product => ({\n          ...product,\n          bpm: 0\n        }));\n        console.log(this.products);\n      }).catch(error => {\n        console.error('Error fetching products:', error);\n      });\n    },\n    addToOrder(index) {\n      const product = this.products[index];\n      if (product.bpm > 0) {\n        const orderItem = {\n          productId: product._id,\n          products_name: product.products_name,\n          price: product.price,\n          amount: product.bpm\n        };\n        this.orders.push(orderItem);\n        this.products[index].orderamount = 0;\n        console.log(this.orders);\n        console.log('เพิ่มสินค้าลงในตะกร้า:', product);\n\n        // Call saveOrder with the productId\n        this.saveOrder(product._id);\n      } else {\n        alert('Please select at least one item to add to order.');\n      }\n    },\n    // อัปเดตค่าของ selectedProductId เมื่อผู้ใช้เลือกสินค้า\n    setSelectedProductId(productId) {\n      this.selectedProductId = productId;\n    },\n    async saveOrder(productId) {\n      try {\n        const url = `http://localhost:3000/products/${productId}/orders`;\n        const response = await axios.post(url, this.postdata);\n        console.log(response.data);\n        alert('Order created successfully');\n        this.orders = []; // Reset orders after saving\n      } catch (error) {\n        console.error(error);\n        alert('Error creating order');\n      }\n    }\n  },\n  created() {\n    this.fetchProducts(); // Fetch products when the component is created\n  }\n};","map":{"version":3,"names":["axios","data","id","products","orders","selectedProductId","postdata","products_name","price","amount","orderamount","postdefault","methods","decrement","index","bpm","increment","fetchProducts","get","then","response","map","product","console","log","catch","error","addToOrder","orderItem","productId","_id","push","saveOrder","alert","setSelectedProductId","url","post","created"],"sources":["src/views/Product.vue"],"sourcesContent":["<template>\n<v-row justify=\"center\" class=\"space px-16\">\n    <v-col cols=\"12\" xs=\"12\" sm=\"6\" md=\"4\" v-for=\"(product, i) in products\" :key=\"i\">\n        <v-card class=\"mx-auto rounded-xl\" max-width=\"300\" color=\"\" flat outlined>\n            <div align=\"center\" justify=\"center\">\n                <v-img max-height=\"300\" max-width=\"300\" contain :src=\"product.img\"></v-img>\n            </div>\n            <div align=\"center\" justify=\"center\">\n                <v-img max-height=\"300\" max-width=\"300\" contain :src=\"product.menu\"></v-img>\n            </div>\n            <v-card-title>{{ product.products_name }}</v-card-title>\n            <v-card-title class=\"grey--text text-grey-darken-1 caption mt-n6\">{{ product.subtitle }}</v-card-title>\n            <v-card-title class=\"mt-n4\">{{ product.price }}</v-card-title>\n            <v-card-actions class=\"mx-2 mt-n4\">\n                <v-btn outlined class=\"mt-n2 add\" @click=\"decrement(i)\">\n                    <v-icon color=\"green\">fa fa-minus</v-icon>\n                </v-btn>\n                <strong class=\"mx-2\" v-text=\"product.bpm\"></strong>\n                <v-btn outlined class=\"mt-n2 add\" @click=\"increment(i)\">\n                    <v-icon color=\"green\">fa fa-plus</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n                <v-btn class=\"mx-2 mt-n3\" fab dark small color=\"green\" @click=\"addToOrder(i)\">\n                    <v-icon dark>fa fa-shopping-basket</v-icon>\n                </v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-col>\n</v-row>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    data() {\n        return {\n            id: '',\n            products: [],\n            orders: [],\n            selectedProductId: '',\n            // ส่งข้อมูล\n            postdata: {\n                products_name: '',\n                price: '',\n                amount: '',\n                orderamount: ''\n            },\n            // ล้างข้อมูล\n            postdefault: {\n                products_name: '',\n                price: '',\n                amount: '',\n            },\n        };\n    },\n    methods: {\n        decrement(index) {\n            if (this.products[index].bpm > 0) {\n                this.products[index].bpm--;\n            }\n        },\n        increment(index) {\n            this.products[index].bpm++;\n        },\n        fetchProducts() {\n            axios.get('http://localhost:3000/products')\n                .then(response => {\n                    this.products = response.data.data.map(product => ({\n                        ...product,\n                        bpm: 0,\n                    }));\n                    console.log(this.products);\n                })\n                .catch(error => {\n                    console.error('Error fetching products:', error);\n                });\n        },\n        addToOrder(index) {\n            const product = this.products[index];\n            if (product.bpm > 0) {\n                const orderItem = {\n                    productId: product._id,\n                    products_name: product.products_name,\n                    price: product.price,\n                    amount: product.bpm,\n                };\n                this.orders.push(orderItem);\n                this.products[index].orderamount = 0;\n                console.log(this.orders);\n                console.log('เพิ่มสินค้าลงในตะกร้า:', product);\n\n                // Call saveOrder with the productId\n                this.saveOrder(product._id);\n            } else {\n                alert('Please select at least one item to add to order.');\n            }\n        },\n        // อัปเดตค่าของ selectedProductId เมื่อผู้ใช้เลือกสินค้า\n        setSelectedProductId(productId) {\n            this.selectedProductId = productId;\n        },\n        async saveOrder(productId) {\n            try {\n                const url = `http://localhost:3000/products/${productId}/orders`;\n                const response = await axios.post(url, this.postdata);\n                console.log(response.data);\n                alert('Order created successfully');\n                this.orders = []; // Reset orders after saving\n            } catch (error) {\n                console.error(error);\n                alert('Error creating order');\n            }\n        },\n    },\n    created() {\n        this.fetchProducts(); // Fetch products when the component is created\n    }\n};\n</script>\n"],"mappings":";AAgCA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,EAAA;MACAC,QAAA;MACAC,MAAA;MACAC,iBAAA;MACA;MACAC,QAAA;QACAC,aAAA;QACAC,KAAA;QACAC,MAAA;QACAC,WAAA;MACA;MACA;MACAC,WAAA;QACAJ,aAAA;QACAC,KAAA;QACAC,MAAA;MACA;IACA;EACA;EACAG,OAAA;IACAC,UAAAC,KAAA;MACA,SAAAX,QAAA,CAAAW,KAAA,EAAAC,GAAA;QACA,KAAAZ,QAAA,CAAAW,KAAA,EAAAC,GAAA;MACA;IACA;IACAC,UAAAF,KAAA;MACA,KAAAX,QAAA,CAAAW,KAAA,EAAAC,GAAA;IACA;IACAE,cAAA;MACAjB,KAAA,CAAAkB,GAAA,mCACAC,IAAA,CAAAC,QAAA;QACA,KAAAjB,QAAA,GAAAiB,QAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAoB,GAAA,CAAAC,OAAA;UACA,GAAAA,OAAA;UACAP,GAAA;QACA;QACAQ,OAAA,CAAAC,GAAA,MAAArB,QAAA;MACA,GACAsB,KAAA,CAAAC,KAAA;QACAH,OAAA,CAAAG,KAAA,6BAAAA,KAAA;MACA;IACA;IACAC,WAAAb,KAAA;MACA,MAAAQ,OAAA,QAAAnB,QAAA,CAAAW,KAAA;MACA,IAAAQ,OAAA,CAAAP,GAAA;QACA,MAAAa,SAAA;UACAC,SAAA,EAAAP,OAAA,CAAAQ,GAAA;UACAvB,aAAA,EAAAe,OAAA,CAAAf,aAAA;UACAC,KAAA,EAAAc,OAAA,CAAAd,KAAA;UACAC,MAAA,EAAAa,OAAA,CAAAP;QACA;QACA,KAAAX,MAAA,CAAA2B,IAAA,CAAAH,SAAA;QACA,KAAAzB,QAAA,CAAAW,KAAA,EAAAJ,WAAA;QACAa,OAAA,CAAAC,GAAA,MAAApB,MAAA;QACAmB,OAAA,CAAAC,GAAA,2BAAAF,OAAA;;QAEA;QACA,KAAAU,SAAA,CAAAV,OAAA,CAAAQ,GAAA;MACA;QACAG,KAAA;MACA;IACA;IACA;IACAC,qBAAAL,SAAA;MACA,KAAAxB,iBAAA,GAAAwB,SAAA;IACA;IACA,MAAAG,UAAAH,SAAA;MACA;QACA,MAAAM,GAAA,qCAAAN,SAAA;QACA,MAAAT,QAAA,SAAApB,KAAA,CAAAoC,IAAA,CAAAD,GAAA,OAAA7B,QAAA;QACAiB,OAAA,CAAAC,GAAA,CAAAJ,QAAA,CAAAnB,IAAA;QACAgC,KAAA;QACA,KAAA7B,MAAA;MACA,SAAAsB,KAAA;QACAH,OAAA,CAAAG,KAAA,CAAAA,KAAA;QACAO,KAAA;MACA;IACA;EACA;EACAI,QAAA;IACA,KAAApB,aAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}