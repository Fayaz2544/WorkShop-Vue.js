{"ast":null,"code":"import axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default {\n  data: () => ({\n    bpm: 1,\n    products: [],\n    id: '',\n    apidata: [],\n    dialogedit: false,\n    // ส่งข้อมูล\n    postdata: {\n      products_name: '',\n      price: '',\n      amout: ''\n    },\n    // ล้างข้อมูล\n    postdefault: {\n      products_name: '',\n      price: '',\n      amout: ''\n    }\n  }),\n  computed: {\n    savemode() {\n      return this.id == '' ? 'New Item' : 'Edit Item';\n    }\n  },\n  created() {\n    this.fetchProducts(); // Fetch products when the component is created\n  },\n  methods: {\n    fetchProducts() {\n      axios.get('http://localhost:3000/orders').then(response => {\n        this.products = response.data.data; // Assuming the data is in response.data.data\n        console.log(response.data.data);\n      }).catch(error => {\n        console.error('Error fetching products:', error);\n      });\n    },\n    newItem() {\n      this.id = '';\n      this.postdata = {\n        ...this.postdefault\n      };\n      this.dialogedit = true;\n    },\n    editItem(product) {\n      this.id = product._id;\n      this.postdata = product;\n      this.dialogedit = true;\n    },\n    closeData() {\n      this.id = '';\n      this.postdata = {\n        ...this.postdefault\n      };\n      this.dialogedit = false;\n    },\n    saveSelect() {\n      if (this.id != '') {\n        this.savePutdata();\n      } else {\n        this.savePostdata();\n      }\n    },\n    async savePostdata() {\n      try {\n        const {\n          data\n        } = await this.axios.post('http://localhost:3000/products', this.postdata);\n        console.log(data);\n        alert('creat complete');\n        this.fetchProducts();\n        this.closeData();\n      } catch (error) {\n        console.log(error);\n        alert('error');\n      }\n    },\n    async savePutdata() {\n      try {\n        const {\n          data\n        } = await this.axios.put('http://localhost:3000/products/' + this.id, this.postdata);\n        console.log(data);\n        alert('update complete');\n        this.fetchProducts();\n        this.closeData();\n      } catch (error) {\n        console.log(error);\n        alert('error');\n      }\n    },\n    async saveDelete(orders) {\n      try {\n        if (confirm('delete it?')) {\n          const {\n            data\n          } = await this.axios.delete('http://localhost:3000/orders/' + orders);\n          console.log(data);\n          Swal.fire({\n            title: \"ลบข้อมูลสำเร็จ\",\n            icon: \"success\",\n            showConfirmButton: false,\n            timer: 1000\n          });\n          this.fetchProducts();\n          this.closeData();\n        }\n      } catch (error) {\n        console.log(error);\n        alert('error');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Swal","data","bpm","products","id","apidata","dialogedit","postdata","products_name","price","amout","postdefault","computed","savemode","created","fetchProducts","methods","get","then","response","console","log","catch","error","newItem","editItem","product","_id","closeData","saveSelect","savePutdata","savePostdata","post","alert","put","saveDelete","orders","confirm","delete","fire","title","icon","showConfirmButton","timer"],"sources":["src/components/ManageOder.vue"],"sourcesContent":["<template>\n<div class=\"\"style=\"padding-top: 20px; justify-content: center;\">\n    <v-row justify=\"center\" class=\"space px-16\">\n        <v-col cols=\"12\" xs=\"12\" sm=\"6\" md=\"4\" v-for=\"(product, i) in products\" :key=\"i\">\n            <v-card class=\"mx-auto rounded-xl\" max-width=\"300\" style=\"padding-top: 30px;\" flat outlined>\n                <div align=\"center\" justify=\"center\">\n                    <v-img v-if=\"product.picmenu\" :src=\"product.picmenu\" max-height=\"200px\" max-width=\"200px\" style contain></v-img>\n                    <div v-else style=\"height: 300px; width: 300px; display: flex; align-items: center; justify-content: center; background-color: lightgray;\">\n                        <span>Image not available</span>\n                    </div>\n                </div>\n                <v-card-title style=\"justify-content:center\">เมนู : {{ product.productName }}</v-card-title>\n                <v-card-title class=\"mt-n4\" style=\"justify-content: center;\">ราคา : {{ product.price }} บาท</v-card-title>\n                <v-card-actions class=\"mx-2 mt-n4\" style=\"justify-content: center;\">\n                    <v-btn color=\"error\" class=\"mt-n2 add\" @click=\"saveDelete(product._id)\">\n                        <span color=\"white\">ลบ</span>\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-col>\n    </v-row>\n    <v-dialog v-model=\"dialogedit\" max-width=\"500\">\n        <v-card>\n            <v-card-title primary-title>{{savemode}}</v-card-title>\n            <v-card-text>\n                <v-row>\n                    <v-col cols=\"6\">\n                        <v-text-field name=\"products_name\" label=\"products_name\" id=\"products_name\" v-model=\"postdata.products_name\"></v-text-field>\n                        <v-text-field name=\"price\" label=\"price\" id=\"price\" v-model=\"postdata.price\"></v-text-field>\n                        <v-text-field name=\"amount\" label=\"amount\" id=\"amount\" v-model=\"postdata.amount\"></v-text-field>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n            <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"error\" @click=\"closeData()\">ยกเลิก</v-btn>\n                <v-btn color=\"info\" @click=\"saveSelect()\">บันทึก</v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-dialog>\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\nexport default {\n    data: () => ({\n        bpm: 1,\n        products: [],\n        id: '',\n        apidata: [],\n        dialogedit: false,\n        // ส่งข้อมูล\n        postdata: {\n            products_name: '',\n            price: '',\n            amout: '',\n        },\n        // ล้างข้อมูล\n        postdefault: {\n            products_name: '',\n            price: '',\n            amout: '',\n        },\n    }),\n    computed: {\n        savemode() {\n            return this.id == '' ? 'New Item' : 'Edit Item'\n        }\n    },\n    created() {\n        this.fetchProducts(); // Fetch products when the component is created\n    },\n    methods: {\n        fetchProducts() {\n            axios.get('http://localhost:3000/orders')\n                .then(response => {\n                    this.products = response.data.data; // Assuming the data is in response.data.data\n                    console.log(response.data.data);\n                })\n                .catch(error => {\n                    console.error('Error fetching products:', error);\n                });\n        },\n        newItem() {\n            this.id = ''\n            this.postdata = {\n                ...this.postdefault\n            }\n            this.dialogedit = true\n        },\n        editItem(product) {\n            this.id = product._id\n            this.postdata = product\n            this.dialogedit = true\n        },\n        closeData() {\n            this.id = ''\n            this.postdata = {\n                ...this.postdefault\n            }\n            this.dialogedit = false\n        },\n        saveSelect() {\n            if (this.id != '') {\n                this.savePutdata()\n            } else {\n                this.savePostdata()\n            }\n        },\n        async savePostdata() {\n            try {\n                const {\n                    data\n                } = await this.axios.post('http://localhost:3000/products', this.postdata)\n                console.log(data)\n                alert('creat complete')\n                this.fetchProducts()\n                this.closeData()\n            } catch (error) {\n                console.log(error);\n                alert('error')\n            }\n        },\n        async savePutdata() {\n            try {\n                const {\n                    data\n                } = await this.axios.put('http://localhost:3000/products/' + this.id, this.postdata)\n                console.log(data)\n                alert('update complete')\n                this.fetchProducts()\n                this.closeData()\n            } catch (error) {\n                console.log(error);\n                alert('error')\n            }\n        },\n        async saveDelete(orders) {\n            try {\n                if (confirm('delete it?')) {\n                    const {\n                        data\n                    } = await this.axios.delete('http://localhost:3000/orders/' + orders)\n                    console.log(data)\n                    Swal.fire({\n                        title: \"ลบข้อมูลสำเร็จ\",\n                        icon: \"success\",\n                        showConfirmButton: false,\n                        timer: 1000\n                    });\n                    this.fetchProducts()\n                    this.closeData()\n                }\n            } catch (error) {\n                console.log(error)\n                alert('error')\n            }\n        }\n    }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n\n.font{\n    font-family: \"Prompt\", sans-serif;\n}\n</style>\n"],"mappings":"AA4CA,OAAAA,KAAA;AACA,OAAAC,IAAA;AAEA;EACAC,IAAA,EAAAA,CAAA;IACAC,GAAA;IACAC,QAAA;IACAC,EAAA;IACAC,OAAA;IACAC,UAAA;IACA;IACAC,QAAA;MACAC,aAAA;MACAC,KAAA;MACAC,KAAA;IACA;IACA;IACAC,WAAA;MACAH,aAAA;MACAC,KAAA;MACAC,KAAA;IACA;EACA;EACAE,QAAA;IACAC,SAAA;MACA,YAAAT,EAAA;IACA;EACA;EACAU,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAD,cAAA;MACAhB,KAAA,CAAAkB,GAAA,iCACAC,IAAA,CAAAC,QAAA;QACA,KAAAhB,QAAA,GAAAgB,QAAA,CAAAlB,IAAA,CAAAA,IAAA;QACAmB,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAAlB,IAAA,CAAAA,IAAA;MACA,GACAqB,KAAA,CAAAC,KAAA;QACAH,OAAA,CAAAG,KAAA,6BAAAA,KAAA;MACA;IACA;IACAC,QAAA;MACA,KAAApB,EAAA;MACA,KAAAG,QAAA;QACA,QAAAI;MACA;MACA,KAAAL,UAAA;IACA;IACAmB,SAAAC,OAAA;MACA,KAAAtB,EAAA,GAAAsB,OAAA,CAAAC,GAAA;MACA,KAAApB,QAAA,GAAAmB,OAAA;MACA,KAAApB,UAAA;IACA;IACAsB,UAAA;MACA,KAAAxB,EAAA;MACA,KAAAG,QAAA;QACA,QAAAI;MACA;MACA,KAAAL,UAAA;IACA;IACAuB,WAAA;MACA,SAAAzB,EAAA;QACA,KAAA0B,WAAA;MACA;QACA,KAAAC,YAAA;MACA;IACA;IACA,MAAAA,aAAA;MACA;QACA;UACA9B;QACA,eAAAF,KAAA,CAAAiC,IAAA,wCAAAzB,QAAA;QACAa,OAAA,CAAAC,GAAA,CAAApB,IAAA;QACAgC,KAAA;QACA,KAAAlB,aAAA;QACA,KAAAa,SAAA;MACA,SAAAL,KAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACAU,KAAA;MACA;IACA;IACA,MAAAH,YAAA;MACA;QACA;UACA7B;QACA,eAAAF,KAAA,CAAAmC,GAAA,0CAAA9B,EAAA,OAAAG,QAAA;QACAa,OAAA,CAAAC,GAAA,CAAApB,IAAA;QACAgC,KAAA;QACA,KAAAlB,aAAA;QACA,KAAAa,SAAA;MACA,SAAAL,KAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACAU,KAAA;MACA;IACA;IACA,MAAAE,WAAAC,MAAA;MACA;QACA,IAAAC,OAAA;UACA;YACApC;UACA,eAAAF,KAAA,CAAAuC,MAAA,mCAAAF,MAAA;UACAhB,OAAA,CAAAC,GAAA,CAAApB,IAAA;UACAD,IAAA,CAAAuC,IAAA;YACAC,KAAA;YACAC,IAAA;YACAC,iBAAA;YACAC,KAAA;UACA;UACA,KAAA5B,aAAA;UACA,KAAAa,SAAA;QACA;MACA,SAAAL,KAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACAU,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}