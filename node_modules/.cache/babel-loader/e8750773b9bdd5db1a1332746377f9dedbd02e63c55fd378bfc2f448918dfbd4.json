{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      products: [],\n      orders: []\n    };\n  },\n  methods: {\n    decrement(index) {\n      if (this.products[index].bpm > 0) {\n        this.products[index].bpm--;\n      }\n    },\n    increment(index) {\n      this.products[index].bpm++;\n    },\n    addToOrder(index) {\n      const product = this.products[index];\n      const order = {\n        productId: product._id,\n        productName: product.products_name,\n        price: product.price,\n        amount: product.amount,\n        orderamount: product.bpm\n      };\n      this.orders.push(order);\n      console.log(this.order);\n      // ลบค่า bpm ให้กลับเป็น 0 เมื่อสินค้าถูกเพิ่มเข้าใน order\n      this.products[index].bpm = 0;\n      this.saveOrder(product._id);\n    },\n    addToOrder(index) {\n      const product = this.products[index];\n      const order = {\n        productId: product._id,\n        productName: product.products_name,\n        price: product.price,\n        amount: product.amount,\n        orderamount: product.bpm\n      };\n      this.orders.push(order);\n      // เรียกใช้ savePostdata เพื่อบันทึกข้อมูล order\n      this.savePostdata(product._id);\n      // ลบค่า bpm ให้กลับเป็น 0 เมื่อสินค้าถูกเพิ่มเข้าใน order\n      this.products[index].bpm = 0;\n    },\n    async savePostdata(productId) {\n      try {\n        const {\n          data\n        } = await axios.post('http://localhost:3000/orders', {\n          productId: productId\n          // แนบข้อมูลอื่น ๆ ที่ต้องการส่งไปยังเซิร์ฟเวอร์\n        });\n        console.log(data);\n        alert('Order created successfully');\n        // หลังจากสร้างออร์เดอร์เสร็จแล้ว เรียกเมธอด fetchProducts เพื่อโหลดสินค้าใหม่\n        this.fetchProducts();\n      } catch (error) {\n        console.error(error);\n        alert('Error creating order');\n      }\n    },\n    fetchProducts() {\n      axios.get('http://localhost:3000/products').then(response => {\n        this.products = response.data.data.map(product => ({\n          ...product,\n          bpm: 0\n        }));\n        console.log(this.products);\n      }).catch(error => {\n        console.error('Error fetching products:', error);\n      });\n    }\n  },\n  created() {\n    this.fetchProducts(); // Fetch products when the component is created\n  }\n};","map":{"version":3,"names":["axios","data","products","orders","methods","decrement","index","bpm","increment","addToOrder","product","order","productId","_id","productName","products_name","price","amount","orderamount","push","console","log","saveOrder","savePostdata","post","alert","fetchProducts","error","get","then","response","map","catch","created"],"sources":["src/views/Product.vue"],"sourcesContent":["<template>\n<v-row justify=\"center\" class=\"space px-16\">\n    <v-col cols=\"12\" xs=\"12\" sm=\"6\" md=\"4\" v-for=\"(product, i) in products\" :key=\"i\">\n        <v-card class=\"mx-auto rounded-xl\" max-width=\"300\" color=\"\" flat outlined>\n            <div align=\"center\" justify=\"center\">\n                <v-img max-height=\"300\" max-width=\"300\" contain :src=\"product.img\"></v-img>\n            </div>\n            <div align=\"center\" justify=\"center\">\n                <v-img max-height=\"300\" max-width=\"300\" contain :src=\"product.menu\"></v-img>\n            </div>\n            <v-card-title>{{ product.products_name }}</v-card-title>\n            <v-card-title class=\"grey--text text-grey-darken-1 caption mt-n6\">{{ product.subtitle }}</v-card-title>\n            <v-card-title class=\"mt-n4\">{{ product.price }}</v-card-title>\n            <v-card-actions class=\"mx-2 mt-n4\">\n                <v-btn outlined class=\"mt-n2 add\" @click=\"decrement(i)\">\n                    <v-icon color=\"green\">fa fa-minus</v-icon>\n                </v-btn>\n                <strong class=\"mx-2\" v-text=\"product.bpm\"></strong>\n                <v-btn outlined class=\"mt-n2 add\" @click=\"increment(i)\">\n                    <v-icon color=\"green\">fa fa-plus</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n                <v-btn class=\"mx-2 mt-n3\" fab dark small color=\"green\" @click=\"addToOrder(i)\">\n                    <v-icon dark>fa fa-shopping-basket</v-icon>\n                </v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-col>\n</v-row>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    data() {\n        return {\n            products: [],\n            orders: [],\n        };\n    },\n    methods: {\n        decrement(index) {\n            if (this.products[index].bpm > 0) {\n                this.products[index].bpm--;\n            }\n        },\n        increment(index) {\n            this.products[index].bpm++;\n        },\n        addToOrder(index) {\n            const product = this.products[index];\n            const order = {\n                productId: product._id,\n                productName: product.products_name,\n                price: product.price,\n                amount: product.amount,\n                orderamount: product.bpm,\n            };\n            this.orders.push(order);\n            console.log(this.order);\n            // ลบค่า bpm ให้กลับเป็น 0 เมื่อสินค้าถูกเพิ่มเข้าใน order\n            this.products[index].bpm = 0;\n            this.saveOrder(product._id);\n        },\n        addToOrder(index) {\n    const product = this.products[index];\n    const order = {\n        productId: product._id,\n        productName: product.products_name,\n        price: product.price,\n        amount: product.amount,\n        orderamount: product.bpm,\n    };\n    this.orders.push(order);\n    // เรียกใช้ savePostdata เพื่อบันทึกข้อมูล order\n    this.savePostdata(product._id);\n    // ลบค่า bpm ให้กลับเป็น 0 เมื่อสินค้าถูกเพิ่มเข้าใน order\n    this.products[index].bpm = 0;\n},\nasync savePostdata(productId) {\n    try {\n        const { data } = await axios.post('http://localhost:3000/orders', {\n            productId: productId,\n            // แนบข้อมูลอื่น ๆ ที่ต้องการส่งไปยังเซิร์ฟเวอร์\n        });\n        console.log(data);\n        alert('Order created successfully');\n        // หลังจากสร้างออร์เดอร์เสร็จแล้ว เรียกเมธอด fetchProducts เพื่อโหลดสินค้าใหม่\n        this.fetchProducts();\n    } catch (error) {\n        console.error(error);\n        alert('Error creating order');\n    }\n},\n\n        fetchProducts() {\n            axios.get('http://localhost:3000/products')\n                .then(response => {\n                    this.products = response.data.data.map(product => ({\n                        ...product,\n                        bpm: 0,\n                    }));\n                    console.log(this.products);\n                })\n                .catch(error => {\n                    console.error('Error fetching products:', error);\n                });\n        },\n    },\n    created() {\n        this.fetchProducts(); // Fetch products when the component is created\n    }\n};\n</script>\n"],"mappings":";AAgCA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAAC,KAAA;MACA,SAAAJ,QAAA,CAAAI,KAAA,EAAAC,GAAA;QACA,KAAAL,QAAA,CAAAI,KAAA,EAAAC,GAAA;MACA;IACA;IACAC,UAAAF,KAAA;MACA,KAAAJ,QAAA,CAAAI,KAAA,EAAAC,GAAA;IACA;IACAE,WAAAH,KAAA;MACA,MAAAI,OAAA,QAAAR,QAAA,CAAAI,KAAA;MACA,MAAAK,KAAA;QACAC,SAAA,EAAAF,OAAA,CAAAG,GAAA;QACAC,WAAA,EAAAJ,OAAA,CAAAK,aAAA;QACAC,KAAA,EAAAN,OAAA,CAAAM,KAAA;QACAC,MAAA,EAAAP,OAAA,CAAAO,MAAA;QACAC,WAAA,EAAAR,OAAA,CAAAH;MACA;MACA,KAAAJ,MAAA,CAAAgB,IAAA,CAAAR,KAAA;MACAS,OAAA,CAAAC,GAAA,MAAAV,KAAA;MACA;MACA,KAAAT,QAAA,CAAAI,KAAA,EAAAC,GAAA;MACA,KAAAe,SAAA,CAAAZ,OAAA,CAAAG,GAAA;IACA;IACAJ,WAAAH,KAAA;MACA,MAAAI,OAAA,QAAAR,QAAA,CAAAI,KAAA;MACA,MAAAK,KAAA;QACAC,SAAA,EAAAF,OAAA,CAAAG,GAAA;QACAC,WAAA,EAAAJ,OAAA,CAAAK,aAAA;QACAC,KAAA,EAAAN,OAAA,CAAAM,KAAA;QACAC,MAAA,EAAAP,OAAA,CAAAO,MAAA;QACAC,WAAA,EAAAR,OAAA,CAAAH;MACA;MACA,KAAAJ,MAAA,CAAAgB,IAAA,CAAAR,KAAA;MACA;MACA,KAAAY,YAAA,CAAAb,OAAA,CAAAG,GAAA;MACA;MACA,KAAAX,QAAA,CAAAI,KAAA,EAAAC,GAAA;IACA;IACA,MAAAgB,aAAAX,SAAA;MACA;QACA;UAAAX;QAAA,UAAAD,KAAA,CAAAwB,IAAA;UACAZ,SAAA,EAAAA;UACA;QACA;QACAQ,OAAA,CAAAC,GAAA,CAAApB,IAAA;QACAwB,KAAA;QACA;QACA,KAAAC,aAAA;MACA,SAAAC,KAAA;QACAP,OAAA,CAAAO,KAAA,CAAAA,KAAA;QACAF,KAAA;MACA;IACA;IAEAC,cAAA;MACA1B,KAAA,CAAA4B,GAAA,mCACAC,IAAA,CAAAC,QAAA;QACA,KAAA5B,QAAA,GAAA4B,QAAA,CAAA7B,IAAA,CAAAA,IAAA,CAAA8B,GAAA,CAAArB,OAAA;UACA,GAAAA,OAAA;UACAH,GAAA;QACA;QACAa,OAAA,CAAAC,GAAA,MAAAnB,QAAA;MACA,GACA8B,KAAA,CAAAL,KAAA;QACAP,OAAA,CAAAO,KAAA,6BAAAA,KAAA;MACA;IACA;EACA;EACAM,QAAA;IACA,KAAAP,aAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}